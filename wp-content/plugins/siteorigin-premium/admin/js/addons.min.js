jQuery((function(a){a(".so-addon-banner").each((function(){var i=a(this);if(!i.find("img").length){var o=Trianglify({width:128,height:128,variance:1,cell_size:32,seed:i.data("seed")});i.append(o.svg())}})),a(".so-addon").each((function(){var i=a(this),o=i.data("id"),n=i.data("section");i.find(".so-addon-toggle-active button").click((function(e){var s=a(this),d=parseInt(s.data("status"));s.prop("disabled",!0),a.post(a("#addons-list").data("action-url"),{id:o,section:n,status:d,activate_required:1},(function(o){if(s.prop("disabled",!1),d?(i.removeClass("so-addon-is-inactive").addClass("so-addon-is-active"),i.find(".so-addon-settings").show()):(i.removeClass("so-addon-is-active").addClass("so-addon-is-inactive"),i.find(".so-addon-settings").hide()),void 0!==o.action_links&&o.action_links.length){var n=i.find(".so-addon-links").empty();n.length||(n=a('<div class="so-addon-links"></div>').insertAfter(i.find(".so-addon-name"))),n.html(o.action_links.join(" | "))}a(window).resize()}))}))})),a(".so-addon .so-addon-tags a").click((function(i){i.preventDefault();var n=a(this);a(".addons-search").val(n.data("tag")),o()}));var i="";a(".page-sections a").click((function(n){n.preventDefault(),a(".page-sections li").removeClass("active-section");var e=a(this);i=e.data("section"),e.parent("li").addClass("active-section"),o()}));var o=function(){var o=i,n=a(".addons-search").val();""===n?""===o?a(".so-addon-wrap").show():(a(".so-addon-wrap").hide(),a('.so-addon[data-section="'+i+'"]').parents().show()):a(".so-addon").each((function(){var i=a(this),e=i.find("h3").html()+" "+i.find(".so-addon-description").html();i.find(".so-addon-tags a").each((function(){e+=a(this).data("tag")+" "})),e.toLowerCase().indexOf(n)>-1&&(""===o||i.data("section")===o)?i.parent().show():i.parent().hide()}))};o(),a(".addons-search").on({keyup:o,change:o,search:o}),a(window).resize((function(){var i=a(".so-addon").css("height","auto"),o=0;i.each((function(){o=Math.max(o,a(this).height())})),i.each((function(){a(this).css("height",o)}))})).resize();var n=a("#siteorigin-premium-settings-dialog"),e=a("#addons-list .so-addon-settings");e.click((function(i){var o=a(this);i.preventDefault();var e=n.find(".so-content");e.empty().addClass("so-loading"),a.get(o.data("form-url")).done((function(a){e.html(a)})).fail((function(a){e.html(soPremiumAddons.settingsForm.error),console.error(a)})).always((function(){e.removeClass("so-loading")})),n.show()})),n.find(".so-close").click((function(a){a.preventDefault(),n.hide()})),n.find(".so-save").click((function(i){i.preventDefault();var o=a(this);o.prop("disabled",!0),e.prop("disabled",!0),n.find("form").submit((function(){o.prop("disabled",!1),n.hide()})).submit()})),a("#so-premium-addon-settings-save").load((function(){a("#addons-list .so-addon-settings").prop("disabled",!1)}));var s=a(".modal-video");s.find(".modal-video-close-btn").addBack().click((function(){var a=s.find("iframe.active").removeClass("active");a.length&&a.data("player").pause();s.hide()})),a(document).keyup((function(a){"Escape"===a.key&&s.find(".modal-video-close-btn").click()})),a(".js-modal-video").each((function(){var i,o=a(this),n=o.data("video-id"),e="https://player.vimeo.com/video/"+n+"?autoplay=0";0===(i=a("iframe#video_"+n)).length&&(i=a("<iframe >").attr({id:"video_"+n,src:e,allow:"autoplay",allowfullscreen:"1"}).appendTo(s.find(".modal-video-movie-wrap")));var d=new Vimeo.Player(i);i.data("player",d),d.on("play",(function(){i.is(":visible")||d.pause()})),o.click((function(){s.find("iframe").hide(),i.show().addClass("active"),s.show(),d.play()}))})),s.show().hide()}));