!function(t){var e={},n={};t.fn.webfontselector=function(){var t=Array.prototype.slice.call(arguments);if("string"==typeof t[0]){var n=t[0];e.hasOwnProperty(n)&&"function"==typeof e[n]&&(t.length>1?e[n].apply(this,t.slice(1)):e[n].apply(this))}else"object"==typeof t[0]?e.init.apply(this,t):console.log("No default options yet! Please call webfontselector with a method name or an options object.")},e.init=function(a){return a=e.setDefaultOptions(a),this.each((function(){var e=t(this),o=e.parent();if(e.append('<option value="" data-webfont="false"></option>'),a.useInherit&&e.append('<option value="inherit" data-webfont="false">Inherit</option>'),a.useVariants){o.append('<div class="field-wrapper"><label>Variant</label><select class="font-variant"></select></div>');var i=o.find("select.font-variant");i.parent().hide()}if(a.useSubsets){o.append('<div class="field-wrapper"><label>Subset</label><select class="font-subset"></select></div>');var s=o.find("select.font-subset");s.parent().hide()}var r=!1;for(var l in a.modules){var p=a.modules[l],f=p.hasOwnProperty("label")?p.label:l,d=t('<optgroup label="'+f+'"></optgroup>');for(var c in d.data("module",l),e.append(d),p.fonts){var u=p.fonts[c],h=t("<option>"+c+"</option>");h.val(c),u.hasOwnProperty("variants")&&u.variants.length&&h.data("variants",u.variants.join(",")),u.hasOwnProperty("subsets")&&u.subsets.length&&h.data("subsets",u.subsets.join(",")),h.data("category",u.category),h.data("webfont","web_safe"!==l),h.attr("style","font-family: '"+c+"', "+u.category+", __"+l),d.append(h)}}e.change((function(){var e=t(this).find("option:selected");if(a.useVariants)if(i.empty().val(""),void 0!==e.data("variants")){var n=e.data("variants").split(",");i.append(t("<option></option>")).val(""),t.each(n,(function(e,n){i.append(t("<option></option>").html(n))})),n.indexOf("regular")>-1?i.val("regular"):n.indexOf("400")>-1?i.val("400"):i.val(n[0]),i.find("option").length>2?i.parent().show():i.parent().hide()}else i.parent().hide();a.useSubsets&&(s.empty().val(""),void 0!==e.data("subsets")?(s.append(t("<option></option>")),t.each(e.data("subsets").split(","),(function(e,n){s.append(t("<option></option>").html(n))})),s.val("latin"),s.find("option").length>2?s.parent().show():s.parent().hide()):s.parent().hide())}));var v=function(o,l){if(r){var p={};p.font=e.val();var f=e.find("option:selected");p.webfont=f.data("webfont"),p.category=f.data("category"),a.useVariants&&(p.variant=i.val()),a.useSubsets&&(p.subset=s.val()),p.module=f.parent().data("module");var d=f.attr("style");d?!p.webfont||n.hasOwnProperty(p.font)&&n[p.font]||(WebFont.load({google:{families:[p.font]}}),n[p.font]=!0):d=null,e.siblings(".chosen-container").find(".chosen-single > span").attr("style",d);var c=t(this).data("currentValue");l&&l.silent||t(this).trigger("font_change",[p,c]),t(this).data("currentValue",p)}}.bind(this);o.find("select").change(v);var g=null;if(null===g){var b=null;e.on("chosen:ready",(function(e,a){var o=a.chosen.dropdown,i=o.find(".chosen-results");o.find(".chosen-results").on("scroll",(function(){clearTimeout(b),b=setTimeout((function(){var e,a,o,s={};i.find("li").each((function(){var r=t(this),l=r.position().top;void 0!==r.attr("style")&&""!==r.attr("style")&&-1===r.attr("style").indexOf("__web_safe")&&l>-10&&l<i.outerHeight()+30&&(o=r.attr("style").match(/font-family: ([^,]+),.*__([^,]+);/),a=o[1].replace(/['"]/g,"").trim(),e=o[2],void 0===s[e]&&(s[e]=[]),void 0===n[a]&&(s[e].push(a),n[a]=!0))})),s.hasOwnProperty("google")&&s.google.length>0&&WebFont.load({google:{families:s.google}})}),500)})),setTimeout((function(){i.trigger("scroll")}),500),a.chosen.search_field.on("keyup",(function(){setTimeout((function(){i.trigger("scroll")}),500)}))})).on("chosen:showing_dropdown",(function(t,e){e.chosen.dropdown.find(".chosen-results").trigger("scroll")}));var y={allow_single_deselect:!0,search_contains:!0};a.hasOwnProperty("width")&&(y.width=a.width),e.chosen(y),g=!0}r=!0}))},e.setDefaultOptions=function(t){var e={useVariants:!0,useSubsets:!0};for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},e.update=function(t,e){var n=t;if(n&&"inherit"!==n){var a=(n=n.split(",")[0]).match(/[\'\"]?([^\'\"]+)[\'\"]?/);null!=a&&(n=a.length>1?a[1]:a[0])}this.val()!==n&&(this.val(n),this.trigger("chosen:updated"),this.trigger("change",{silent:!0}));var o=this.parent().find("select.font-variant");o.length&&e&&o.val(e)}}(jQuery);